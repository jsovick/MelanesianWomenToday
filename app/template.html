
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
            <meta name="viewport" content="width=device-width,initial-scale=1">
                <title>Melanesian Women Today</title>
                        <link rel="stylesheet" href="styles/mwt.min.css" />
                        <link rel="stylesheet" href="styles/jquery.mobile.icons.min.css" />
                        <link rel="stylesheet" href="styles/custom.css" />
                        <link rel="stylesheet" href="styles/jquery.mobile.structure-1.4.5.min.css" />
                        <script src="scripts/libs/jquery-1.11.1.min.js"></script>
                        <script src="scripts/libs/jquery.mobile-1.4.5.min.js"></script>
                        <script src="cordova.js"></script>
    </head>
        <body id="index">


          <div data-role="page" data-theme="a" >
              <div data-role="content" data-theme="a">
                    <a href="index.html" data-ajax="false"><img src="images/icon-small.png" ></a>
                    <div class="text-center">
                        <img src="images/banner.JPG">
                    </div>

                    <h2>Abuse</h2>
                    <p id="demo"></p>

                    <script type="text/javascript">

                    var loadJSONP = function ( url, callback ) {

                        // Create script with url and callback (if specified)
                        var ref = window.document.getElementsByTagName( 'script' )[ 0 ];
                        var script = window.document.createElement( 'script' );
                        script.src = url + (url.indexOf( '?' ) + 1 ? '&' : '?') + 'callback=' + callback;

                        // Insert script tag into the DOM (append to <head>)
                        ref.parentNode.insertBefore( script, ref );

                        // After the script is loaded (and executed), remove it
                        script.onload = function () {
                            this.remove();
                        };

                    };

                    var mycallback = function ( data ) {
                        console.log( data );
                        //var obj = JSON.parse(data);
                        var jsonStr = JSON.stringify(data);
                        //document.getElementById("demo").innerHTML = jsonStr;

                        var obj = JSON.parse(jsonStr);
                        var appendage = document.createElement('appendage');

                        for (i = 0; i < obj.length; i++) {
                            appendage.innerHTML +=  "<b>Title: </b><br>" + obj[i].title + "<br><br>" +  "<b>Question: </b><br>" + obj[i].post_content + "<br><br>" + "<b>BYS Therapist Response: </b><br>" + obj[i].comment_content + "<hr>";
                            demo.appendChild(appendage);
                        }


                    }

                     loadJSONP( 'https://www.askbys.com/askbysmobile/testjsonp.php?MobileWPSearch=abuse', 'mycallback' ); //use jsonp callback facility to output json from our jsonp test page
                      </script>

                </div>
            </div>

        </body>
    </html>

<script>

// open win and turn off location
function goGetWordPressForm(WPUrl) {
    var ref = window.open(WPUrl, '_blank', 'location=yes,toolbar=yes,presentationstyle=formsheet,transitionstyle=crossdissolve');
};


// open win and turn off location
function goGetWordPressFormInjectCSS(WPUrl) {
    var ref = window.open(WPUrl, '_blank', 'location=yes,toolbar=yes,presentationstyle=formsheet,transitionstyle=crossdissolve');
    ref.addEventListener('loadstop', function() {
    ref.insertCSS({file: "styles/wp-contact7.css"});
                         });
};


// attach listener to loadstart
//ref.addEventListener('loadstart', function(event) {
//var urlSuccessPage = "http://myloginapp/success/";
//if (event.url == urlSuccessPage) {
//ref.close();
//}
//});

</script>
